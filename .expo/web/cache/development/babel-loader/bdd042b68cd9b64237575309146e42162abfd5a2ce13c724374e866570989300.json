{"ast":null,"code":"'use strict';\n\nimport { IS_WINDOW_AVAILABLE, logger, ReanimatedError } from \"../../common\";\nvar CSS_ANIMATIONS_STYLE_TAG_ID = 'ReanimatedCSSStyleTag';\nvar cssNameToIndex = new Map();\nvar cssNameList = [];\nexport function configureWebCSSAnimations() {\n  if (!IS_WINDOW_AVAILABLE || document.getElementById(CSS_ANIMATIONS_STYLE_TAG_ID) !== null) {\n    return;\n  }\n  var cssStyleTag = document.createElement('style');\n  cssStyleTag.id = CSS_ANIMATIONS_STYLE_TAG_ID;\n  cssStyleTag.onload = function () {\n    if (!cssStyleTag.sheet) {\n      logger.error('Failed to create CSS animations stylesheet.');\n    }\n  };\n  document.head.append(cssStyleTag);\n}\nfunction getStyleSheet() {\n  var _document$getElementB, _document$getElementB2;\n  return (_document$getElementB = (_document$getElementB2 = document.getElementById(CSS_ANIMATIONS_STYLE_TAG_ID)) == null ? void 0 : _document$getElementB2.sheet) != null ? _document$getElementB : null;\n}\nexport function insertCSSAnimation(animationName, keyframes) {\n  if (!IS_WINDOW_AVAILABLE || cssNameToIndex.has(animationName)) {\n    return;\n  }\n  var sheet = getStyleSheet();\n  if (!sheet) {\n    logger.error('Failed to create CSS animations stylesheet.');\n    return;\n  }\n  var animation = `@keyframes ${animationName} { ${keyframes} }`;\n  sheet.insertRule(animation, 0);\n  cssNameList.unshift(animationName);\n  cssNameToIndex.set(animationName, 0);\n  for (var i = 1; i < cssNameList.length; ++i) {\n    var nextCSSName = cssNameList[i];\n    var nextCSSIndex = cssNameToIndex.get(nextCSSName);\n    if (nextCSSIndex === undefined) {\n      throw new ReanimatedError('Failed to obtain CSS animation index.');\n    }\n    cssNameToIndex.set(cssNameList[i], nextCSSIndex + 1);\n  }\n}\nexport function removeCSSAnimation(animationName) {\n  if (!IS_WINDOW_AVAILABLE) {\n    return;\n  }\n  var sheet = getStyleSheet();\n  var currentCSSIndex = cssNameToIndex.get(animationName);\n  if (currentCSSIndex === undefined) {\n    throw new ReanimatedError('Failed to obtain CSS animation index.');\n  }\n  sheet == null ? void 0 : sheet.deleteRule(currentCSSIndex);\n  cssNameList.splice(currentCSSIndex, 1);\n  cssNameToIndex.delete(animationName);\n  for (var i = currentCSSIndex; i < cssNameList.length; ++i) {\n    var nextCSSName = cssNameList[i];\n    var nextCSSIndex = cssNameToIndex.get(nextCSSName);\n    if (nextCSSIndex === undefined) {\n      throw new ReanimatedError('Failed to obtain CSS animation index.');\n    }\n    cssNameToIndex.set(cssNameList[i], nextCSSIndex - 1);\n  }\n}","map":{"version":3,"names":["IS_WINDOW_AVAILABLE","logger","ReanimatedError","CSS_ANIMATIONS_STYLE_TAG_ID","cssNameToIndex","Map","cssNameList","configureWebCSSAnimations","document","getElementById","cssStyleTag","createElement","id","onload","sheet","error","head","append","getStyleSheet","_document$getElementB","_document$getElementB2","insertCSSAnimation","animationName","keyframes","has","animation","insertRule","unshift","set","i","length","nextCSSName","nextCSSIndex","get","undefined","removeCSSAnimation","currentCSSIndex","deleteRule","splice","delete"],"sources":["C:\\Users\\asus\\Desktop\\V.E.T\\node_modules\\react-native-reanimated\\src\\css\\web\\domUtils.ts"],"sourcesContent":["'use strict';\nimport { IS_WINDOW_AVAILABLE, logger, ReanimatedError } from '../../common';\n\nconst CSS_ANIMATIONS_STYLE_TAG_ID = 'ReanimatedCSSStyleTag';\n\n// Since we cannot remove keyframe from DOM by its name, we have to store its id\nconst cssNameToIndex = new Map<string, number>();\nconst cssNameList: string[] = [];\n\nexport function configureWebCSSAnimations() {\n  if (\n    !IS_WINDOW_AVAILABLE || // Without this check SSR crashes because document is undefined (NextExample on CI)\n    document.getElementById(CSS_ANIMATIONS_STYLE_TAG_ID) !== null\n  ) {\n    return;\n  }\n\n  const cssStyleTag = document.createElement('style');\n  cssStyleTag.id = CSS_ANIMATIONS_STYLE_TAG_ID;\n\n  cssStyleTag.onload = () => {\n    if (!cssStyleTag.sheet) {\n      logger.error('Failed to create CSS animations stylesheet.');\n    }\n  };\n\n  document.head.append(cssStyleTag);\n}\n\nfunction getStyleSheet() {\n  return (\n    (\n      document.getElementById(\n        CSS_ANIMATIONS_STYLE_TAG_ID\n      ) as HTMLStyleElement | null\n    )?.sheet ?? null\n  );\n}\n\nexport function insertCSSAnimation(animationName: string, keyframes: string) {\n  // Without window availability check SSR crashes because document is undefined\n  // (NextExample on CI)\n  if (!IS_WINDOW_AVAILABLE || cssNameToIndex.has(animationName)) {\n    return;\n  }\n\n  const sheet = getStyleSheet();\n\n  if (!sheet) {\n    logger.error('Failed to create CSS animations stylesheet.');\n    return;\n  }\n\n  const animation = `@keyframes ${animationName} { ${keyframes} }`;\n\n  sheet.insertRule(animation, 0);\n  cssNameList.unshift(animationName);\n  cssNameToIndex.set(animationName, 0);\n\n  for (let i = 1; i < cssNameList.length; ++i) {\n    const nextCSSName = cssNameList[i];\n    const nextCSSIndex = cssNameToIndex.get(nextCSSName);\n\n    if (nextCSSIndex === undefined) {\n      throw new ReanimatedError('Failed to obtain CSS animation index.');\n    }\n\n    cssNameToIndex.set(cssNameList[i], nextCSSIndex + 1);\n  }\n}\n\nexport function removeCSSAnimation(animationName: string) {\n  // Without this check SSR crashes because document is undefined (NextExample on CI)\n  if (!IS_WINDOW_AVAILABLE) {\n    return;\n  }\n\n  const sheet = getStyleSheet();\n  const currentCSSIndex = cssNameToIndex.get(animationName);\n\n  if (currentCSSIndex === undefined) {\n    throw new ReanimatedError('Failed to obtain CSS animation index.');\n  }\n\n  sheet?.deleteRule(currentCSSIndex);\n  cssNameList.splice(currentCSSIndex, 1);\n  cssNameToIndex.delete(animationName);\n\n  for (let i = currentCSSIndex; i < cssNameList.length; ++i) {\n    const nextCSSName = cssNameList[i];\n    const nextCSSIndex = cssNameToIndex.get(nextCSSName);\n\n    if (nextCSSIndex === undefined) {\n      throw new ReanimatedError('Failed to obtain CSS animation index.');\n    }\n\n    cssNameToIndex.set(cssNameList[i], nextCSSIndex - 1);\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}