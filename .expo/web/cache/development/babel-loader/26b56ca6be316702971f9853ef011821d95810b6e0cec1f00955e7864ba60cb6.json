{"ast":null,"code":"'use strict';\n\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _excluded = [\"transitionProperty\"];\nimport { ReanimatedError } from \"../../../../common\";\nimport { areArraysEqual, convertPropertyToArray, deepEqual } from \"../../../utils\";\nimport { normalizeDelay, normalizeDuration, normalizeTimingFunction } from \"../common\";\nimport { normalizeTransitionBehavior } from \"./settings\";\nimport { createEmptyTransitionConfig, parseTransitionShorthand } from \"./shorthand\";\nexport var ERROR_MESSAGES = {\n  invalidTransitionProperty: function invalidTransitionProperty(transitionProperty) {\n    return `Invalid transition property \"${JSON.stringify(transitionProperty)}\"`;\n  }\n};\nfunction getExpandedConfigProperties(config) {\n  var result = config.transition ? parseTransitionShorthand(config.transition) : createEmptyTransitionConfig();\n  for (var _ref of Object.entries(config)) {\n    var _ref2 = _slicedToArray(_ref, 2);\n    var key = _ref2[0];\n    var value = _ref2[1];\n    result[key] = convertPropertyToArray(value);\n  }\n  return result;\n}\nvar hasTransition = function hasTransition(_ref3) {\n  var transitionProperty = _ref3.transitionProperty,\n    rest = _objectWithoutProperties(_ref3, _excluded);\n  if (transitionProperty.length) {\n    var hasNone = transitionProperty[0] === 'none';\n    if (transitionProperty.some(function (prop) {\n      return prop === 'none' !== hasNone;\n    })) {\n      throw new ReanimatedError(ERROR_MESSAGES.invalidTransitionProperty(transitionProperty));\n    }\n    return !hasNone;\n  }\n  return Object.values(rest).some(function (value) {\n    return value.length;\n  });\n};\nexport function normalizeCSSTransitionProperties(config) {\n  var expandedProperties = getExpandedConfigProperties(config);\n  if (!hasTransition(expandedProperties)) {\n    return null;\n  }\n  var transitionProperty = expandedProperties.transitionProperty,\n    transitionDuration = expandedProperties.transitionDuration,\n    transitionTimingFunction = expandedProperties.transitionTimingFunction,\n    transitionDelay = expandedProperties.transitionDelay,\n    transitionBehavior = expandedProperties.transitionBehavior;\n  var specificProperties = [];\n  var allPropertiesTransition = false;\n  var settings = {};\n  if (!transitionProperty.length) {\n    transitionProperty.push('all');\n  }\n  for (var i = transitionProperty.length - 1; i >= 0; i--) {\n    var property = transitionProperty[i];\n    if (settings != null && settings[property]) {\n      continue;\n    }\n    if (property === 'all') {\n      allPropertiesTransition = true;\n    } else {\n      specificProperties.push(property);\n    }\n    settings[property] = {\n      duration: normalizeDuration(transitionDuration[i % transitionDuration.length]),\n      timingFunction: normalizeTimingFunction(transitionTimingFunction[i % transitionTimingFunction.length]),\n      delay: normalizeDelay(transitionDelay[i % transitionDelay.length]),\n      allowDiscrete: normalizeTransitionBehavior(transitionBehavior[i % transitionBehavior.length])\n    };\n    if (allPropertiesTransition) {\n      break;\n    }\n  }\n  return {\n    properties: allPropertiesTransition ? 'all' : specificProperties.reverse(),\n    settings: settings\n  };\n}\nexport function getNormalizedCSSTransitionConfigUpdates(oldConfig, newConfig) {\n  var configUpdates = {};\n  if (oldConfig.properties !== newConfig.properties && (!Array.isArray(oldConfig.properties) || !Array.isArray(newConfig.properties) || !areArraysEqual(oldConfig.properties, newConfig.properties))) {\n    configUpdates.properties = newConfig.properties;\n  }\n  var newSettingsKeys = Object.keys(newConfig.settings);\n  var oldSettingsKeys = Object.keys(oldConfig.settings);\n  if (newSettingsKeys.length !== oldSettingsKeys.length) {\n    configUpdates.settings = newConfig.settings;\n  } else {\n    for (var key of newSettingsKeys) {\n      if (!oldConfig.settings[key] || !deepEqual(oldConfig.settings[key], newConfig.settings[key])) {\n        configUpdates.settings = newConfig.settings;\n        break;\n      }\n    }\n  }\n  return configUpdates;\n}","map":{"version":3,"names":["_objectWithoutProperties","_slicedToArray","_excluded","ReanimatedError","areArraysEqual","convertPropertyToArray","deepEqual","normalizeDelay","normalizeDuration","normalizeTimingFunction","normalizeTransitionBehavior","createEmptyTransitionConfig","parseTransitionShorthand","ERROR_MESSAGES","invalidTransitionProperty","transitionProperty","JSON","stringify","getExpandedConfigProperties","config","result","transition","_ref","Object","entries","_ref2","key","value","hasTransition","_ref3","rest","length","hasNone","some","prop","values","normalizeCSSTransitionProperties","expandedProperties","transitionDuration","transitionTimingFunction","transitionDelay","transitionBehavior","specificProperties","allPropertiesTransition","settings","push","i","property","duration","timingFunction","delay","allowDiscrete","properties","reverse","getNormalizedCSSTransitionConfigUpdates","oldConfig","newConfig","configUpdates","Array","isArray","newSettingsKeys","keys","oldSettingsKeys"],"sources":["C:\\Users\\asus\\Desktop\\V.E.T\\node_modules\\react-native-reanimated\\src\\css\\native\\normalization\\transition\\config.ts"],"sourcesContent":["'use strict';\nimport { ReanimatedError } from '../../../../common';\nimport type {\n  AnyRecord,\n  CSSTransitionProperties,\n  CSSTransitionProperty,\n} from '../../../types';\nimport {\n  areArraysEqual,\n  convertPropertyToArray,\n  deepEqual,\n} from '../../../utils';\nimport type {\n  NormalizedCSSTransitionConfig,\n  NormalizedCSSTransitionConfigUpdates,\n  NormalizedSingleCSSTransitionSettings,\n} from '../../types';\nimport {\n  normalizeDelay,\n  normalizeDuration,\n  normalizeTimingFunction,\n} from '../common';\nimport { normalizeTransitionBehavior } from './settings';\nimport type { ExpandedCSSTransitionConfigProperties } from './shorthand';\nimport {\n  createEmptyTransitionConfig,\n  parseTransitionShorthand,\n} from './shorthand';\n\nexport const ERROR_MESSAGES = {\n  invalidTransitionProperty: (\n    transitionProperty: CSSTransitionProperty | undefined | string[]\n  ) => `Invalid transition property \"${JSON.stringify(transitionProperty)}\"`,\n};\n\nfunction getExpandedConfigProperties(\n  config: CSSTransitionProperties\n): ExpandedCSSTransitionConfigProperties {\n  const result: AnyRecord = config.transition\n    ? parseTransitionShorthand(config.transition)\n    : createEmptyTransitionConfig();\n\n  for (const [key, value] of Object.entries(config)) {\n    result[key] = convertPropertyToArray(value);\n  }\n\n  return result as ExpandedCSSTransitionConfigProperties;\n}\n\nconst hasTransition = ({\n  transitionProperty,\n  ...rest\n}: ExpandedCSSTransitionConfigProperties) => {\n  if (transitionProperty.length) {\n    const hasNone = transitionProperty[0] === 'none';\n\n    // We allow either all values to be 'none' or none of them to be 'none'\n    if (transitionProperty.some((prop) => (prop === 'none') !== hasNone)) {\n      throw new ReanimatedError(\n        ERROR_MESSAGES.invalidTransitionProperty(transitionProperty)\n      );\n    }\n\n    return !hasNone;\n  }\n\n  // transitionProperty defaults to 'all' if not specified but there are\n  // other transition properties\n  return Object.values(rest).some((value) => value.length);\n};\n\nexport function normalizeCSSTransitionProperties(\n  config: CSSTransitionProperties\n): NormalizedCSSTransitionConfig | null {\n  const expandedProperties = getExpandedConfigProperties(config);\n\n  if (!hasTransition(expandedProperties)) {\n    return null;\n  }\n\n  const {\n    transitionProperty,\n    transitionDuration,\n    transitionTimingFunction,\n    transitionDelay,\n    transitionBehavior,\n  } = expandedProperties;\n  const specificProperties: string[] = [];\n  let allPropertiesTransition = false;\n  const settings: Record<string, NormalizedSingleCSSTransitionSettings> = {};\n\n  if (!transitionProperty.length) {\n    // For cases when transition property hasn't been explicitly specified\n    // (e.g. when only the transitionDuration is set)\n    transitionProperty.push('all');\n  }\n\n  // Go from the last to the first property to ensure that the last\n  // one entry for the same property is used without having to override\n  // it multiple times if specified more than once (we just take the last\n  // occurrence and ignore remaining ones)\n  for (let i = transitionProperty.length - 1; i >= 0; i--) {\n    const property = transitionProperty[i];\n    // Continue if there was a prop with the same name specified later\n    // (we don't want to override the last occurrence of the property)\n    if (settings?.[property]) {\n      continue;\n    }\n\n    if (property === 'all') {\n      allPropertiesTransition = true;\n    } else {\n      specificProperties.push(property);\n    }\n\n    settings[property] = {\n      duration: normalizeDuration(\n        transitionDuration[i % transitionDuration.length]\n      ),\n      timingFunction: normalizeTimingFunction(\n        transitionTimingFunction[i % transitionTimingFunction.length]\n      ),\n      delay: normalizeDelay(transitionDelay[i % transitionDelay.length]),\n      allowDiscrete: normalizeTransitionBehavior(\n        transitionBehavior[i % transitionBehavior.length]\n      ),\n    };\n\n    // 'all' transition property overrides all properties before it,\n    // so we don't need to process them\n    if (allPropertiesTransition) {\n      break;\n    }\n  }\n\n  return {\n    properties: allPropertiesTransition ? 'all' : specificProperties.reverse(),\n    settings,\n  };\n}\n\nexport function getNormalizedCSSTransitionConfigUpdates(\n  oldConfig: NormalizedCSSTransitionConfig,\n  newConfig: NormalizedCSSTransitionConfig\n): NormalizedCSSTransitionConfigUpdates {\n  const configUpdates: NormalizedCSSTransitionConfigUpdates = {};\n\n  if (\n    oldConfig.properties !== newConfig.properties &&\n    (!Array.isArray(oldConfig.properties) ||\n      !Array.isArray(newConfig.properties) ||\n      !areArraysEqual(oldConfig.properties, newConfig.properties))\n  ) {\n    configUpdates.properties = newConfig.properties;\n  }\n\n  const newSettingsKeys = Object.keys(newConfig.settings);\n  const oldSettingsKeys = Object.keys(oldConfig.settings);\n\n  if (newSettingsKeys.length !== oldSettingsKeys.length) {\n    configUpdates.settings = newConfig.settings;\n  } else {\n    for (const key of newSettingsKeys) {\n      if (\n        !oldConfig.settings[key] ||\n        // TODO - think of a better way to compare settings (necessary for\n        // timing functions comparison). Maybe add some custom way instead\n        // of deepEqual\n        !deepEqual(oldConfig.settings[key], newConfig.settings[key])\n      ) {\n        configUpdates.settings = newConfig.settings;\n        break;\n      }\n    }\n  }\n\n  return configUpdates;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}