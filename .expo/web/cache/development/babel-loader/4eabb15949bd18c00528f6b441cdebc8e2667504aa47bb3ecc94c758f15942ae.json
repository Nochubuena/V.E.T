{"ast":null,"code":"'use strict';\n\nimport { logger } from \"../../common\";\nimport { LayoutAnimationType, ReduceMotion } from \"../../commonTypes\";\nimport { EasingNameSymbol } from \"../../Easing\";\nimport { _updatePropsJS } from \"../../ReanimatedModule/js-reanimated\";\nimport { ReducedMotionManager } from \"../../ReducedMotion\";\nimport { Keyframe } from \"../animationBuilder\";\nimport { setElementPosition, snapshots } from \"./componentStyle\";\nimport { Animations, TransitionType } from \"./config\";\nimport { TransitionGenerator } from \"./createAnimation\";\nimport { scheduleAnimationCleanup } from \"./domUtils\";\nimport { getEasingByName, maybeGetBezierEasing, WebEasings } from \"./Easing.web\";\nimport { prepareCurvedTransition } from \"./transition/Curved.web\";\nfunction getEasingFromConfig(config) {\n  if (!config.easingV) {\n    return getEasingByName('linear');\n  }\n  var easingName = config.easingV[EasingNameSymbol];\n  if (easingName in WebEasings) {\n    return getEasingByName(easingName);\n  }\n  var bezierEasing = maybeGetBezierEasing(config.easingV);\n  if (!bezierEasing) {\n    logger.warn(`Selected easing is not currently supported on web. Using linear easing instead.`);\n    return getEasingByName('linear');\n  }\n  return bezierEasing;\n}\nfunction getRandomDelay() {\n  var maxDelay = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1000;\n  return Math.floor(Math.random() * (maxDelay + 1)) / 1000;\n}\nfunction getDelayFromConfig(config) {\n  var shouldRandomizeDelay = config.randomizeDelay;\n  var delay = shouldRandomizeDelay ? getRandomDelay() : 0;\n  if (!config.delayV) {\n    return delay;\n  }\n  return shouldRandomizeDelay ? getRandomDelay(config.delayV) : config.delayV / 1000;\n}\nexport function getReducedMotionFromConfig(config) {\n  if (!config.reduceMotionV) {\n    return ReducedMotionManager.jsValue;\n  }\n  switch (config.reduceMotionV) {\n    case ReduceMotion.Never:\n      return false;\n    case ReduceMotion.Always:\n      return true;\n    default:\n      return ReducedMotionManager.jsValue;\n  }\n}\nfunction getDurationFromConfig(config, animationName) {\n  var defaultDuration = animationName in Animations ? Animations[animationName].duration : 0.3;\n  return config.durationV !== undefined ? config.durationV / 1000 : defaultDuration;\n}\nfunction getCallbackFromConfig(config) {\n  return config.callbackV !== undefined ? config.callbackV : null;\n}\nfunction getReversedFromConfig(config) {\n  return !!config.reversed;\n}\nexport function getProcessedConfig(animationName, animationType, config) {\n  return {\n    animationName: animationName,\n    animationType: animationType,\n    duration: getDurationFromConfig(config, animationName),\n    delay: getDelayFromConfig(config),\n    easing: getEasingFromConfig(config),\n    callback: getCallbackFromConfig(config),\n    reversed: getReversedFromConfig(config)\n  };\n}\nexport function maybeModifyStyleForKeyframe(element, config) {\n  if (!(config instanceof Keyframe)) {\n    return;\n  }\n  element.style.animationFillMode = 'forwards';\n  for (var timestampRules of Object.values(config.definitions)) {\n    if ('originX' in timestampRules || 'originY' in timestampRules) {\n      element.style.position = 'absolute';\n      return;\n    }\n  }\n}\nexport function saveSnapshot(element) {\n  var rect = element.getBoundingClientRect();\n  var snapshot = {\n    top: rect.top,\n    left: rect.left,\n    width: rect.width,\n    height: rect.height,\n    scrollOffsets: getElementScrollValue(element)\n  };\n  snapshots.set(element, snapshot);\n}\nexport function setElementAnimation(element, animationConfig) {\n  var shouldSavePosition = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  var parent = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n  var animationName = animationConfig.animationName,\n    duration = animationConfig.duration,\n    delay = animationConfig.delay,\n    easing = animationConfig.easing;\n  var configureAnimation = function configureAnimation() {\n    element.style.animationName = animationName;\n    element.style.animationFillMode = 'backwards';\n    element.style.animationDuration = `${duration}s`;\n    element.style.animationDelay = `${delay}s`;\n    element.style.animationTimingFunction = easing;\n  };\n  if (animationConfig.animationType === LayoutAnimationType.ENTERING) {\n    requestAnimationFrame(configureAnimation);\n  } else {\n    configureAnimation();\n  }\n  var maybeRemoveElement = function maybeRemoveElement() {\n    if (element.reanimatedDummy && parent != null && parent.contains(element)) {\n      element.removedAfterAnimation = true;\n      parent.removeChild(element);\n    }\n  };\n  var wasCallbackCalled = false;\n  var maybeCallCallback = function maybeCallCallback(finished) {\n    if (!wasCallbackCalled && animationConfig.callback) {\n      animationConfig.callback(finished);\n      wasCallbackCalled = true;\n    }\n  };\n  element.onanimationend = function () {\n    if (shouldSavePosition) {\n      saveSnapshot(element);\n    }\n    maybeRemoveElement();\n    maybeCallCallback(true);\n    element.removeEventListener('animationcancel', _animationCancelHandler);\n  };\n  var _animationCancelHandler = function animationCancelHandler() {\n    maybeRemoveElement();\n    maybeCallCallback(false);\n    element.removeEventListener('animationcancel', _animationCancelHandler);\n  };\n  element.onanimationstart = function () {\n    if (animationConfig.animationType === LayoutAnimationType.ENTERING) {\n      _updatePropsJS({\n        visibility: 'initial'\n      }, element);\n    }\n    element.addEventListener('animationcancel', _animationCancelHandler);\n  };\n  if (!(animationName in Animations)) {\n    scheduleAnimationCleanup(animationName, duration + delay, function () {\n      if (shouldSavePosition) {\n        setElementPosition(element, snapshots.get(element));\n      }\n      maybeRemoveElement();\n      maybeCallCallback(false);\n    });\n  }\n}\nexport function handleLayoutTransition(element, animationConfig, transitionData) {\n  var animationName = animationConfig.animationName;\n  var animationType;\n  switch (animationName) {\n    case 'LinearTransition':\n      animationType = TransitionType.LINEAR;\n      break;\n    case 'SequencedTransition':\n      animationType = TransitionType.SEQUENCED;\n      break;\n    case 'FadingTransition':\n      animationType = TransitionType.FADING;\n      break;\n    case 'JumpingTransition':\n      animationType = TransitionType.JUMPING;\n      break;\n    case 'CurvedTransition':\n      animationType = TransitionType.CURVED;\n      break;\n    case 'EntryExitTransition':\n      animationType = TransitionType.ENTRY_EXIT;\n      break;\n    default:\n      animationType = TransitionType.LINEAR;\n      break;\n  }\n  var _TransitionGenerator = TransitionGenerator(animationType, transitionData),\n    transitionKeyframeName = _TransitionGenerator.transitionKeyframeName,\n    dummyTransitionKeyframeName = _TransitionGenerator.dummyTransitionKeyframeName;\n  animationConfig.animationName = transitionKeyframeName;\n  if (animationType === TransitionType.CURVED) {\n    var _prepareCurvedTransit = prepareCurvedTransition(element, animationConfig, transitionData, dummyTransitionKeyframeName),\n      dummy = _prepareCurvedTransit.dummy,\n      dummyAnimationConfig = _prepareCurvedTransit.dummyAnimationConfig;\n    setElementAnimation(dummy, dummyAnimationConfig);\n  }\n  setElementAnimation(element, animationConfig);\n}\nfunction getElementScrollValue(element) {\n  var current = element;\n  var scrollOffsets = {\n    scrollTopOffset: 0,\n    scrollLeftOffset: 0\n  };\n  while (current) {\n    if (current.scrollTop !== 0 && scrollOffsets.scrollTopOffset === 0) {\n      scrollOffsets.scrollTopOffset = current.scrollTop;\n    }\n    if (current.scrollLeft !== 0 && scrollOffsets.scrollLeftOffset === 0) {\n      scrollOffsets.scrollLeftOffset = current.scrollLeft;\n    }\n    current = current.parentElement;\n  }\n  return scrollOffsets;\n}\nexport function handleExitingAnimation(element, animationConfig) {\n  var parent = element.offsetParent;\n  var dummy = element.cloneNode();\n  dummy.reanimatedDummy = true;\n  element.style.animationName = '';\n  dummy.style.animationName = '';\n  var scrollPositions = new Map();\n  var _saveScrollPosition = function saveScrollPosition(node) {\n    scrollPositions.set(node, {\n      top: node.scrollTop,\n      left: node.scrollLeft\n    });\n    for (var child of Array.from(node.children)) {\n      _saveScrollPosition(child);\n    }\n  };\n  _saveScrollPosition(element);\n  while (element.firstChild) {\n    dummy.appendChild(element.firstChild);\n  }\n  parent == null ? void 0 : parent.appendChild(dummy);\n  var _restoreScrollPosition = function restoreScrollPosition(node) {\n    var scrollPosition = scrollPositions.get(node === dummy ? element : node);\n    if (scrollPosition) {\n      node.scrollTop = scrollPosition.top;\n      node.scrollLeft = scrollPosition.left;\n    }\n    for (var child of Array.from(node.children)) {\n      _restoreScrollPosition(child);\n    }\n  };\n  _restoreScrollPosition(dummy);\n  var snapshot = snapshots.get(element);\n  var scrollOffsets = getElementScrollValue(element);\n  var currentScrollTopOffset = scrollOffsets.scrollTopOffset;\n  var lastScrollTopOffset = snapshot.scrollOffsets.scrollTopOffset;\n  if (currentScrollTopOffset !== lastScrollTopOffset) {\n    snapshot.top += lastScrollTopOffset - currentScrollTopOffset;\n  }\n  var currentScrollLeftOffset = scrollOffsets.scrollLeftOffset;\n  var lastScrollLeftOffset = snapshot.scrollOffsets.scrollLeftOffset;\n  if (currentScrollLeftOffset !== lastScrollLeftOffset) {\n    snapshot.left += lastScrollLeftOffset - currentScrollLeftOffset;\n  }\n  snapshots.set(dummy, snapshot);\n  setElementPosition(dummy, snapshot);\n  setElementAnimation(dummy, animationConfig, false, parent);\n}","map":{"version":3,"names":["logger","LayoutAnimationType","ReduceMotion","EasingNameSymbol","_updatePropsJS","ReducedMotionManager","Keyframe","setElementPosition","snapshots","Animations","TransitionType","TransitionGenerator","scheduleAnimationCleanup","getEasingByName","maybeGetBezierEasing","WebEasings","prepareCurvedTransition","getEasingFromConfig","config","easingV","easingName","bezierEasing","warn","getRandomDelay","maxDelay","arguments","length","undefined","Math","floor","random","getDelayFromConfig","shouldRandomizeDelay","randomizeDelay","delay","delayV","getReducedMotionFromConfig","reduceMotionV","jsValue","Never","Always","getDurationFromConfig","animationName","defaultDuration","duration","durationV","getCallbackFromConfig","callbackV","getReversedFromConfig","reversed","getProcessedConfig","animationType","easing","callback","maybeModifyStyleForKeyframe","element","style","animationFillMode","timestampRules","Object","values","definitions","position","saveSnapshot","rect","getBoundingClientRect","snapshot","top","left","width","height","scrollOffsets","getElementScrollValue","set","setElementAnimation","animationConfig","shouldSavePosition","parent","configureAnimation","animationDuration","animationDelay","animationTimingFunction","ENTERING","requestAnimationFrame","maybeRemoveElement","reanimatedDummy","contains","removedAfterAnimation","removeChild","wasCallbackCalled","maybeCallCallback","finished","onanimationend","removeEventListener","animationCancelHandler","onanimationstart","visibility","addEventListener","get","handleLayoutTransition","transitionData","LINEAR","SEQUENCED","FADING","JUMPING","CURVED","ENTRY_EXIT","_TransitionGenerator","transitionKeyframeName","dummyTransitionKeyframeName","_prepareCurvedTransit","dummy","dummyAnimationConfig","current","scrollTopOffset","scrollLeftOffset","scrollTop","scrollLeft","parentElement","handleExitingAnimation","offsetParent","cloneNode","scrollPositions","Map","saveScrollPosition","node","child","Array","from","children","firstChild","appendChild","restoreScrollPosition","scrollPosition","currentScrollTopOffset","lastScrollTopOffset","currentScrollLeftOffset","lastScrollLeftOffset"],"sources":["C:\\Users\\asus\\Desktop\\V.E.T\\node_modules\\react-native-reanimated\\src\\layoutReanimation\\web\\componentUtils.ts"],"sourcesContent":["'use strict';\nimport { logger } from '../../common';\nimport { LayoutAnimationType, ReduceMotion } from '../../commonTypes';\nimport type { EasingFunctionFactory } from '../../Easing';\nimport { EasingNameSymbol } from '../../Easing';\nimport type { ReanimatedHTMLElement } from '../../ReanimatedModule/js-reanimated';\nimport { _updatePropsJS } from '../../ReanimatedModule/js-reanimated';\nimport { ReducedMotionManager } from '../../ReducedMotion';\nimport { Keyframe } from '../animationBuilder';\nimport type { TransitionData } from './animationParser';\nimport type { ReanimatedSnapshot, ScrollOffsets } from './componentStyle';\nimport { setElementPosition, snapshots } from './componentStyle';\nimport type {\n  AnimationCallback,\n  AnimationConfig,\n  AnimationNames,\n  CustomConfig,\n  EasingType,\n  KeyframeDefinitions,\n} from './config';\nimport { Animations, TransitionType } from './config';\nimport { TransitionGenerator } from './createAnimation';\nimport { scheduleAnimationCleanup } from './domUtils';\nimport type { WebEasingsNames } from './Easing.web';\nimport {\n  getEasingByName,\n  maybeGetBezierEasing,\n  WebEasings,\n} from './Easing.web';\nimport { prepareCurvedTransition } from './transition/Curved.web';\n\nfunction getEasingFromConfig(config: CustomConfig): string {\n  if (!config.easingV) {\n    return getEasingByName('linear');\n  }\n\n  const easingName = (config.easingV as EasingType)[EasingNameSymbol];\n\n  if (easingName in WebEasings) {\n    return getEasingByName(easingName as WebEasingsNames);\n  }\n\n  const bezierEasing = maybeGetBezierEasing(\n    config.easingV as EasingFunctionFactory\n  );\n\n  if (!bezierEasing) {\n    logger.warn(\n      `Selected easing is not currently supported on web. Using linear easing instead.`\n    );\n\n    return getEasingByName('linear');\n  }\n\n  return bezierEasing;\n}\n\nfunction getRandomDelay(maxDelay = 1000) {\n  return Math.floor(Math.random() * (maxDelay + 1)) / 1000;\n}\n\nfunction getDelayFromConfig(config: CustomConfig): number {\n  const shouldRandomizeDelay = config.randomizeDelay;\n\n  const delay = shouldRandomizeDelay ? getRandomDelay() : 0;\n\n  if (!config.delayV) {\n    return delay;\n  }\n\n  return shouldRandomizeDelay\n    ? getRandomDelay(config.delayV)\n    : config.delayV / 1000;\n}\n\nexport function getReducedMotionFromConfig(config: CustomConfig) {\n  if (!config.reduceMotionV) {\n    return ReducedMotionManager.jsValue;\n  }\n\n  switch (config.reduceMotionV) {\n    case ReduceMotion.Never:\n      return false;\n    case ReduceMotion.Always:\n      return true;\n    default:\n      return ReducedMotionManager.jsValue;\n  }\n}\n\nfunction getDurationFromConfig(\n  config: CustomConfig,\n  animationName: string\n): number {\n  // Duration in keyframe has to be in seconds. However, when using `.duration()` modifier we pass it in miliseconds.\n  // If `duration` was specified in config, we have to divide it by `1000`, otherwise we return value that is already in seconds.\n\n  const defaultDuration =\n    animationName in Animations\n      ? Animations[animationName as AnimationNames].duration\n      : 0.3;\n\n  return config.durationV !== undefined\n    ? config.durationV / 1000\n    : defaultDuration;\n}\n\nfunction getCallbackFromConfig(config: CustomConfig): AnimationCallback {\n  return config.callbackV !== undefined ? config.callbackV : null;\n}\n\nfunction getReversedFromConfig(config: CustomConfig) {\n  return !!config.reversed;\n}\n\nexport function getProcessedConfig(\n  animationName: string,\n  animationType: LayoutAnimationType,\n  config: CustomConfig\n): AnimationConfig {\n  return {\n    animationName,\n    animationType,\n    duration: getDurationFromConfig(config, animationName),\n    delay: getDelayFromConfig(config),\n    easing: getEasingFromConfig(config),\n    callback: getCallbackFromConfig(config),\n    reversed: getReversedFromConfig(config),\n  };\n}\n\nexport function maybeModifyStyleForKeyframe(\n  element: HTMLElement,\n  config: CustomConfig\n) {\n  if (!(config instanceof Keyframe)) {\n    return;\n  }\n\n  // We need to set `animationFillMode` to `forwards`, otherwise component will go back to its position.\n  // This will result in wrong snapshot\n  element.style.animationFillMode = 'forwards';\n\n  for (const timestampRules of Object.values(\n    config.definitions as KeyframeDefinitions\n  )) {\n    if ('originX' in timestampRules || 'originY' in timestampRules) {\n      element.style.position = 'absolute';\n      return;\n    }\n  }\n}\n\nexport function saveSnapshot(element: HTMLElement) {\n  const rect = element.getBoundingClientRect();\n\n  const snapshot: ReanimatedSnapshot = {\n    top: rect.top,\n    left: rect.left,\n    width: rect.width,\n    height: rect.height,\n    scrollOffsets: getElementScrollValue(element),\n  };\n\n  snapshots.set(element, snapshot);\n}\n\nexport function setElementAnimation(\n  element: ReanimatedHTMLElement,\n  animationConfig: AnimationConfig,\n  shouldSavePosition = false,\n  parent: Element | null = null\n) {\n  const { animationName, duration, delay, easing } = animationConfig;\n\n  const configureAnimation = () => {\n    element.style.animationName = animationName;\n    element.style.animationFillMode = 'backwards';\n    element.style.animationDuration = `${duration}s`;\n    element.style.animationDelay = `${delay}s`;\n    element.style.animationTimingFunction = easing;\n  };\n\n  if (animationConfig.animationType === LayoutAnimationType.ENTERING) {\n    // On chrome sometimes entering animations flicker. This is most likely caused by animation being interrupted\n    // by already started tasks. To avoid flickering, we use `requestAnimationFrame`, which will run callback right before repaint.\n    requestAnimationFrame(configureAnimation);\n  } else {\n    configureAnimation();\n  }\n\n  const maybeRemoveElement = () => {\n    if (element.reanimatedDummy && parent?.contains(element)) {\n      element.removedAfterAnimation = true;\n      parent.removeChild(element);\n    }\n  };\n\n  let wasCallbackCalled = false;\n  const maybeCallCallback = (finished: boolean) => {\n    if (!wasCallbackCalled && animationConfig.callback) {\n      animationConfig.callback(finished);\n      wasCallbackCalled = true;\n    }\n  };\n\n  element.onanimationend = () => {\n    if (shouldSavePosition) {\n      saveSnapshot(element);\n    }\n\n    maybeRemoveElement();\n    maybeCallCallback(true);\n\n    element.removeEventListener('animationcancel', animationCancelHandler);\n  };\n\n  const animationCancelHandler = () => {\n    maybeRemoveElement();\n    maybeCallCallback(false);\n\n    element.removeEventListener('animationcancel', animationCancelHandler);\n  };\n\n  // Here we have to use `addEventListener` since element.onanimationcancel doesn't work on chrome\n  element.onanimationstart = () => {\n    if (animationConfig.animationType === LayoutAnimationType.ENTERING) {\n      _updatePropsJS({ visibility: 'initial' }, element);\n    }\n\n    element.addEventListener('animationcancel', animationCancelHandler);\n  };\n\n  if (!(animationName in Animations)) {\n    scheduleAnimationCleanup(animationName, duration + delay, () => {\n      if (shouldSavePosition) {\n        setElementPosition(element, snapshots.get(element)!);\n      }\n\n      maybeRemoveElement();\n      maybeCallCallback(false);\n    });\n  }\n}\n\nexport function handleLayoutTransition(\n  element: ReanimatedHTMLElement,\n  animationConfig: AnimationConfig,\n  transitionData: TransitionData\n) {\n  const { animationName } = animationConfig;\n\n  let animationType;\n\n  switch (animationName) {\n    case 'LinearTransition':\n      animationType = TransitionType.LINEAR;\n      break;\n    case 'SequencedTransition':\n      animationType = TransitionType.SEQUENCED;\n      break;\n    case 'FadingTransition':\n      animationType = TransitionType.FADING;\n      break;\n    case 'JumpingTransition':\n      animationType = TransitionType.JUMPING;\n      break;\n    case 'CurvedTransition':\n      animationType = TransitionType.CURVED;\n      break;\n    case 'EntryExitTransition':\n      animationType = TransitionType.ENTRY_EXIT;\n      break;\n    default:\n      animationType = TransitionType.LINEAR;\n      break;\n  }\n\n  const { transitionKeyframeName, dummyTransitionKeyframeName } =\n    TransitionGenerator(animationType, transitionData);\n\n  animationConfig.animationName = transitionKeyframeName;\n\n  if (animationType === TransitionType.CURVED) {\n    const { dummy, dummyAnimationConfig } = prepareCurvedTransition(\n      element,\n      animationConfig,\n      transitionData,\n      dummyTransitionKeyframeName! // In `CurvedTransition` it cannot be undefined\n    );\n\n    setElementAnimation(dummy, dummyAnimationConfig);\n  }\n  setElementAnimation(element, animationConfig);\n}\n\nfunction getElementScrollValue(element: HTMLElement): ScrollOffsets {\n  let current: HTMLElement | null = element;\n\n  const scrollOffsets: ScrollOffsets = {\n    scrollTopOffset: 0,\n    scrollLeftOffset: 0,\n  };\n\n  while (current) {\n    if (current.scrollTop !== 0 && scrollOffsets.scrollTopOffset === 0) {\n      scrollOffsets.scrollTopOffset = current.scrollTop;\n    }\n\n    if (current.scrollLeft !== 0 && scrollOffsets.scrollLeftOffset === 0) {\n      scrollOffsets.scrollLeftOffset = current.scrollLeft;\n    }\n\n    current = current.parentElement;\n  }\n\n  return scrollOffsets;\n}\n\nexport function handleExitingAnimation(\n  element: HTMLElement,\n  animationConfig: AnimationConfig\n) {\n  const parent = element.offsetParent;\n  const dummy = element.cloneNode() as ReanimatedHTMLElement;\n  dummy.reanimatedDummy = true;\n\n  element.style.animationName = '';\n  dummy.style.animationName = '';\n\n  // Moving elements in DOM resets their scroll positions\n  // so we memorize them here and restore after\n  const scrollPositions = new Map<Element, { top: number; left: number }>();\n  const saveScrollPosition = (node: Element) => {\n    scrollPositions.set(node, {\n      top: node.scrollTop,\n      left: node.scrollLeft,\n    });\n    for (const child of Array.from(node.children)) {\n      saveScrollPosition(child);\n    }\n  };\n  saveScrollPosition(element);\n\n  // After cloning the element, we want to move all children from original element to its clone. This is because original element\n  // will be unmounted, therefore when this code executes in child component, parent will be either empty or removed soon.\n  // Using element.cloneNode(true) doesn't solve the problem, because it creates copy of children and we won't be able to set their animations\n  //\n  // This loop works because appendChild() moves element into its new parent instead of copying it\n  while (element.firstChild) {\n    dummy.appendChild(element.firstChild);\n  }\n\n  parent?.appendChild(dummy);\n\n  const restoreScrollPosition = (node: Element) => {\n    const scrollPosition = scrollPositions.get(node === dummy ? element : node);\n    if (scrollPosition) {\n      node.scrollTop = scrollPosition.top;\n      node.scrollLeft = scrollPosition.left;\n    }\n    for (const child of Array.from(node.children)) {\n      restoreScrollPosition(child);\n    }\n  };\n  restoreScrollPosition(dummy);\n\n  const snapshot = snapshots.get(element)!;\n\n  const scrollOffsets = getElementScrollValue(element);\n\n  // Scroll does not trigger snapshotting, therefore if we start exiting animation after\n  // scrolling through parent component, dummy will end up in wrong place. In order to fix that\n  // we keep last known scroll position in snapshot and then adjust dummy position based on\n  // last known scroll offset and current scroll offset\n\n  const currentScrollTopOffset = scrollOffsets.scrollTopOffset;\n  const lastScrollTopOffset = snapshot.scrollOffsets.scrollTopOffset;\n\n  if (currentScrollTopOffset !== lastScrollTopOffset) {\n    snapshot.top += lastScrollTopOffset - currentScrollTopOffset;\n  }\n\n  const currentScrollLeftOffset = scrollOffsets.scrollLeftOffset;\n  const lastScrollLeftOffset = snapshot.scrollOffsets.scrollLeftOffset;\n\n  if (currentScrollLeftOffset !== lastScrollLeftOffset) {\n    snapshot.left += lastScrollLeftOffset - currentScrollLeftOffset;\n  }\n\n  snapshots.set(dummy, snapshot);\n\n  setElementPosition(dummy, snapshot);\n\n  setElementAnimation(dummy, animationConfig, false, parent);\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}